<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">

    <meta name="title" content="Abstract Machines | Easy-to-Write Code Considered Harmful">
    <meta name="description" content="Hello, I'm Leandro. I make Abstract Machines, like Caramel, a functional language for type-safe scalable applications; LAM, an actor runtime for the Web and IoT; or Zap, a build system for modern polyglot teams. This is my company's blog. Here you can find essays like \"Easy-to-Write Code Considered Harmful\", and more. Do tweet at me (@leostera) what you think of it!">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://abstractmachines.dev">
    <meta property="og:title" content="Abstract Machines | Easy-to-Write Code Considered Harmful ">
    <meta property="og:description" content="Hello, I'm Leandro. I make Abstract Machines, like Caramel, a functional language for type-safe scalable applications; LAM, an actor runtime for the Web and IoT; or Zap, a build system for modern polyglot teams. This is my company's blog. Here you can find essays like \"Easy-to-Write Code Considered Harmful\", and more. Do tweet at me (@leostera) what you think of it!">
    <meta property="og:image" content="https://abstractmachines.dev/assets/socialmedia.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Abstract Machines | Easy-to-Write Code Considered Harmful ">
    <meta property="twitter:description" content="Hello, I'm Leandro. I make Abstract Machines, like Caramel, a functional language for type-safe scalable applications; LAM, an actor runtime for the Web and IoT; or Zap, a build system for modern polyglot teams. This is my company's blog. Here you can find essays like \"Easy-to-Write Code Considered Harmful\", and more. Do tweet at me (@leostera) what you think of it!">
    <meta property="twitter:image" content="https://abstractmachines.dev/assets/socialmedia.png">

    <title>Abstract Machines | Easy-to-Write Code Considered Harmful </title>

    <link rel="preload" href="/global.css" as="style">
    <link rel="preload" href="/posts/style.css" as="style">
    <link rel="stylesheet" href="/global.css">
    <link rel="stylesheet" href="/posts/style.css">

    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-tomorrow.css" rel="stylesheet" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-65775908-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-65775908-6');
    </script>
  </head>
  <body>
    <div class="container">
      <section class="center">
        <section class="content">
          <nav>
            <a class="img" href="/" alt="Abstract Machines Home">
              <div class="brand">
                <img class="isotype super-tiny" src="/assets/Isotype_inverted.png" alt="Abstract Machines Logo"/>
                <span>Abstract Machines</span>
              </div>
            </a>
            <div>
              <a class="icon" href="https://twitter.com/leostera">
                <img src="/assets/twitter.png" alt="Follow me on Twitter"/>
              </a>
              <a class="icon" href="https://github.com/AbstractMachinesLab">
                <img src="/assets/github.png" alt="Check out Github"/>
              </a>
            </div>
          </nav>
        </section>
      </section>
      <section class="center">
        <section class="content">
          <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<h2><a href="#am013" aria-hidden="true" class="anchor" id="am013"></a>AM013</h2>
<h1><a href="#easy-to-write-code-considered-harmful" aria-hidden="true" class="anchor" id="easy-to-write-code-considered-harmful"></a>Easy-to-Write Code Considered Harmful</h1>
<p>Ever wondered why some old projects from former employees are so damn hard to
read and maintain?</p>
<p>I’d like to argue that the original authors are not super-humans or 10x coders,
but that they had built an implicit context that they carried around in their
heads when they were writing that code.</p>
<p>To them, writing that code was easy because they relied on this implicit context.</p>
<p>And that only means that you had to pay the cost of reconstructing that context
from the fragments they left in the codebase every time you tried to work on
it.</p>
<blockquote>
<p><strong>NOTE</strong>: I said “Easy to Write” but I really wanted to say
“Write-optimized”.  Unfortunately “Write-optimized” is also used to mean that
something is meant to process data in a way that makes writing it somewhere
as fast as possible.</p>
</blockquote>
<hr />
<p>Roy Derks recently posted on Twitter a question.</p>
<br />
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">What do you prefer?<br><br>import { useState } from &#39;react&#39;<br><br>OR<br><br>import React from &#39;react&#39;<br><br>React.useState()</p>&mdash; Roy Derks (@gethackteam) <a href="https://twitter.com/gethackteam/status/1355216426622136328?ref_src=twsrc%5Etfw">January 29, 2021</a></blockquote> 
<br />
<p>From the answers, I saw people mostly pointing out 4 things:</p>
<ol>
<li>~36 said they’d go for the first approach, some argued it is more
idiomatic or better supported by React, or allows tree-shaking</li>
<li>about 6 trolled about using Vue instead or “mixing it up”</li>
<li>1 said it’s a useless debate, since its all the same after transpilation</li>
<li>the rest said they’d prefer the second approach</li>
</ol>
<p>This suggests that a larger number of people are more likely to import symbols
from a module and detach them from their origin.</p>
<p>This can be less cognitive overhead <em>while you are writing it</em>, because most of
what you need to remember is in your working memory already.</p>
<p>When you just wrote the <code>useState</code> import, calling <code>useState(0)</code> will be dead obvious.</p>
<p>But what happens when your working memory is cleared?</p>
<p>The cost of mapping imported symbols to specific modules is paid every time
someone reads the code.</p>
<p>As the complexity of your codebase increases, because it will, you’ll pay more
and more time every time you try to read the code.</p>
<h3><a href="#react-hooks" aria-hidden="true" class="anchor" id="react-hooks"></a>React Hooks</h3>
<p>Let’s look at a piece of React code with hooks:</p>
<pre><code class="language-js">// some React component
const [enabled, setEnabled, unsetEnabled] = useState(false);
const [{first,second}, {setFirst,setSecond}] = useState2(0, 0);
</code></pre>
<p>It is impossible to know from this whether someone is misusing <code>React.useState</code>
or if we are using <code>CustomHooks.useState</code>. I’m forced to go to the top of the
module every time I want to see where this function is actually coming from.</p>
<p>The alternative would’ve been to write out:</p>
<pre><code class="language-js">// some React component
const [enabled, setEnabled, unsetEnabled] = React.useState(false);
const [{first,second}, {setFirst,setSecond}] = CustomHooks.useState2(0, 0);
</code></pre>
<p>Writing out the module name helps us see that we’re in fact using this wrong.</p>
<p>And the next time anyone reads this code they’ll immediately know where names
are coming from.</p>
<p>This is what you’d call <em>read-optimized code</em>, or “Easy-to-Read” code.</p>
<p>You’re meant to pay a little more when you write it, so reading it is cheapest.</p>
<h2><a href="#elixir-aliases" aria-hidden="true" class="anchor" id="elixir-aliases"></a>Elixir Aliases</h2>
<p>In the Elixir community is very common to import, require, or alias modules and
functions from different modules to preserve a general sense of aesthetics.</p>
<p>When you are writing the code, and you are up and running with
<code>Ecto.Changeset</code>, functions like <code>traverse_errors/2</code> are at the tip of your
fingers, so you bring them into scope.</p>
<p>That module you wanted to use, from some of your application-specific “context
modules”, also should be aliased.</p>
<p>Reading <code>MyApp.MyContext.MyMod</code> over and over is just repeating you what you
already know.</p>
<p>Here again, the cost of mapping imported symbols to specific aliases is paid
every time someone reads the code.</p>
<h2><a href="#implicit-context" aria-hidden="true" class="anchor" id="implicit-context"></a>Implicit Context</h2>
<p>Most code that we write <em>because it’s easier</em> is likely relying on a lot of
<strong>implicit context</strong>. This context could be domain knowledge, framework
specific knowledge, or just whatever we happen to have in working memory as
we’re writing it.</p>
<p>Most of the time, this is harmful in the long term.</p>
<p><em>Easy-to-Write code</em> is code that will be <em>slow to read</em> without that
<strong>implicit context</strong>.</p>
<p>And that context will need some effort to be built up again!</p>
<p>Who doesn’t have that context and needs to pay the cost of building it
up? Let’s see:</p>
<ul>
<li>New employees</li>
<li>Current employees that didn’t write this code</li>
<li>You, a week from then if you had to switch tasks</li>
</ul>
<p>So be kinder to your future self and whoever is going to maintain this.</p>
<p>Pay the cost upfront. Write code that is <em>Easy-to-Read</em>.</p>
<h2><a href="#ok-so-how-do-i-write-easy-to-read-code" aria-hidden="true" class="anchor" id="ok-so-how-do-i-write-easy-to-read-code"></a>Ok, so how do I write Easy-to-Read code?</h2>
<p>It’s easier to read than to learn how to write it, but if you’re here you’re
either already trying or willing to, so lets get down to it.</p>
<p>First, <strong>identify why is this easy to write for you now</strong>:</p>
<ul>
<li>you are very familiar with the codebase – its an old project and you’ve been at it for a while</li>
<li>you’ve worked with this domain for a while – its another project in FinTech, or another CMS</li>
<li>you recently wrote similar code elsewhere – its a well understood pattern within your codebase or engineering niche</li>
<li>you’ve used this tools for a while – you like this framework and have used it for years</li>
</ul>
<p>Then <strong>consider how would you write it if you didn’t have those reasons</strong>:</p>
<ul>
<li>If this was your first day with this codebase, would you do this?</li>
<li>If you hadn’t worked in this domain, would you know this?</li>
<li>If it had been a while since you last wrote similar code, would you remember this?</li>
<li>If this was your first day with these tools, would this make sense to you?</li>
</ul>
<p>Do this a few times and you will write code that is a lot more aware of the
things it takes for granted.</p>
<p>You and your peers will thank you for it.</p>
<hr />
<h3><a href="#one-last-thing" aria-hidden="true" class="anchor" id="one-last-thing"></a>One Last Thing</h3>
<p>There is a lot more to be said about the Cognitive Overhead of Reading Code,
and how we can pay it upfront to make it easier for others to onboard
themselves into a codebase, and for everyone involved to maintain that code
over time.</p>
<p>For example, you shipping a feature this week instead of next week may seem
like a great thing right now, but in perspective it could slow down a lot of
people that try to maintain code that was Easy to Write for you.</p>
<p>Be mindful. Code is a liability. Your job is to produce the least amount of it
that brings the most value across a wide number of dimensions, and long-term
maintainability is very likely one of them.</p>
<p>Oh yeah, and leave an Easter-egg every now and then.</p>

        </section>
      </section>
      <section class="center">
        <section class="content center">
          <h4> What's next?</h4>
          <p>
          Make sure to follow me on twitter to get them as soon as they're out.
          </p>
          <p>
          <a href="https://twitter.com/leostera?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-show-count="false">follow @leostera</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
          </p>
        </section>
      </section>
      <footer>
        <section class="center content">
          <div>
            <a class="img" href="/" alt="Abstract Machines Home">
              <img class="isotype tiny" src="/assets/Isotype_inverted.png" alt="Abstract Machines Logo"/>
            </a>
          </div>
        </section>
      </footer>
    </div>
    <script src="https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js"></script>
    <script src="https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>
  </body>
</html>
